<h2>店舗情報登録</h2>
<h3>店舗情報を入力してください</h3>

<%= form_with(url: check_company_registration_path, local: true) do |f| %>
  <!--企業情報-->
  <%= fields_for @company do |company_form| %>
    <div class="form-group row">
      <%= company_form.label :name, class: "col-md-2" %>
      <%= company_form.text_field :name, class: "form-control col-md-10" %>
    </div>
  <% end %>
  
  <!--店舗情報-->
  <%= fields_for @branch do |branch_form| %>
    <div class="form-group row">
      <%= branch_form.label :name, class: "col-md-2" %>
      <%= branch_form.text_field :name, class: "form-control col-md-10" %>
    </div>
    
    <div class="form-group row">
      <%= branch_form.label "営業時間", class: "col-md-2" %>
      <div class="col-md-10">
        <div class="row">
          <%= branch_form.time_field :start_of_business_hours, class: "form-control col-5" %>
          <div class="col-2">～</div>
          <%= branch_form.time_field :end_of_business_hours, class: "form-control col-5" %>
        </div>
      </div>
    </div>
    
    <div class="form-group row">
      <div class="col-md-2"></div>
      <div class="col-md-10">
        <div class="row form-check">
          <%= branch_form.check_box :cross_day, class: "form-check-input" %>
          <%= branch_form.label :cross_day, "営業時間が日をまたぐ", class: "form-check-label" %>
        </div>
      </div>
    </div>
    
    <div class="form-group">
      <h4>シフト提出期間</h4>
      <div class="ml-5">
        <div class="form-check">
          <%= branch_form.radio_button :period_type, 'one_week', class: 'form-check-input js-check', onclick: 'displayForm()', checked: true %>
          <%= branch_form.label '1週間ごと', class: "form-check-label" %>
        </div>
        <div class="form-check">
          <%= branch_form.radio_button :period_type, 'two_weeks', class: 'form-check-input js-check', onclick: 'displayForm()' %>
          <%= branch_form.label '2週間ごと', class: "form-check-label" %>
        </div>
        <div class="form-check">
          <%= branch_form.radio_button :period_type, 'harf_month', class: 'form-check-input js-check', onclick: 'displayForm()' %>
          <%= branch_form.label '半月ごと', class: "form-check-label" %>
        </div>
        <div class="form-check">
          <%= branch_form.radio_button :period_type, 'one_month', class: 'form-check-input js-check', onclick: 'displayForm()' %>
          <%= branch_form.label '1ヵ月ごと', class: "form-check-label" %>
        </div>
      </div>
    </div>
  <% end %>
  
  <!--monthly or weekly情報-->
  <h4>シフト提出期間詳細</h4>
  <div id="one-week-form">
    1週間
    <%= fields_for :one_week do |weekly_form| %>
      <div>
        <%= weekly_form.label :start_day, "シフト開始曜日" %>
        <%= weekly_form.select :start_day, day_pull_down, include_blank: "シフト開始の曜日を選択して下さい" %>
      </div>
      <div>
        <%= weekly_form.label :deadline_day, "締め切り日" %>
        <%= weekly_form.number_field :deadline_day, in: 1..30 %> 日前
      </div>
    <% end %>
  </div>
  
  <div id="two-weeks-form">
    2週間
    <%= fields_for :two_weeks do |weekly_form| %>
      <div>
        <%= weekly_form.label :start_day, "シフト開始曜日" %>
        <%= weekly_form.select :start_day, day_pull_down, include_blank: "シフト開始の曜日を選択して下さい" %>
      </div>
      <div>
        <%= weekly_form.label :deadline_day, "締め切り日" %>
        <%= weekly_form.number_field :deadline_day, in: 1..30 %> 日前
      </div>
    <% end %>
  </div>
  
  <div id="harf-month-form">
    半月
    <%= fields_for :harf_month do |monthly_form| %>
      <div>
        期間1
        <%= monthly_form.fields_for :one do |one| %>
          <div>
            <%= one.label :start_day, "シフト開始日" %>
            <%= one.select :start_day, date_pull_down, include_blank: "日付を選択してください" %>
          </div>
          <div>
            <%= one.label :end_day, "シフト終了日" %>
            <%= one.select :end_day, date_pull_down, include_blank: "日付を選択してください" %>
          </div>
          <div>
            <%= one.label :deadline_day, "シフト締切日" %>
            <%= one.select :deadline_day, date_pull_down, include_blank: "日付を選択してください" %>
          </div>
        <% end %>
      </div>
      <div>
        期間2
        <%= monthly_form.fields_for :two do |two| %>
          <div>
            <%= two.label :start_day, "シフト開始日" %>
            <%= two.select :start_day, date_pull_down, include_blank: "日付を選択してください" %>
          </div>
          <div>
            <%= two.label :end_day, "シフト終了日" %>
            <%= two.select :end_day, date_pull_down, include_blank: "日付を選択してください" %>
          </div>
          <div>
            <%= two.label :deadline_day, "シフト締切日" %>
            <%= two.select :deadline_day, date_pull_down, include_blank: "日付を選択してください" %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
  
  <div id="one-month-form">
    1ヵ月
    <%= fields_for :one_month do |monthly_form| %>
      <div>
        <%= monthly_form.label :start_day, "シフト開始日" %>
        <%= monthly_form.select :start_day, date_pull_down, include_blank: "日付を選択してください" %>
      </div>
      <div>
        <%= monthly_form.label :end_day, "シフト終了日" %>
        <%= monthly_form.select :end_day, date_pull_down, include_blank: "日付を選択してください" %>
      </div>
      <div>
        <%= monthly_form.label :deadline_day, "シフト締切日" %>
        <%= monthly_form.select :deadline_day, date_pull_down, include_blank: "日付を選択してください" %>
      </div>
    <% end %>
  </div>
  
  <!--このアプリを使い始める日付-->
  <div class="form-group row">
    <%= f.label :start_date, "シフトの開始日", class: "col-md-2" %>
    <%= f.date_field :start_date, class: "col-md-10 form-control" %>
    <div class="col-md-2"></div>
    <small class="form-text text-muted col-md-10">
      このアプリを使ってシフトを集め始める最初の日を入力してください。<br>
      上の「シフト提出期間詳細」で入力した曜日、日と一致しないと登録が完了しません。
    </small>
  </div>
  
  <!--マスターユーザー-->
  <div class="form-group">
    <h4>マスターユーザーの選択</h4>
    <div class="radio">
      <%= f.radio_button :user, 'new', checked: true %>
      <%= f.label :user_select, '新規のユーザーをマスターにする' %>
    </div>
    <div class="radio">
      <%= f.radio_button :user, 'exist' %>
      <%= f.label :user_select, '既存のユーザーをマスターにする' %>
    </div>
  </div>
  
  <%= f.submit "店舗情報を登録する", class: "btn btn-primary" %>
<% end %>

<script>
  var oneWeekForm = document.getElementById('one-week-form');
  var twoWeeksForm = document.getElementById('two-weeks-form');
  var harfMonthForm = document.getElementById('harf-month-form');
  var oneMonthForm = document.getElementById('one-month-form');
  oneWeekForm.style.display = "block";
  twoWeeksForm.style.display = "none";
  harfMonthForm.style.display = "none";
  oneMonthForm.style.display = "none";
  
  function displayForm() {
    check = document.getElementsByClassName('js-check');
    if (check[0].checked) {
      oneWeekForm.style.display = "block";
      twoWeeksForm.style.display = "none";
      harfMonthForm.style.display = "none";
      oneMonthForm.style.display = "none";
    }
    else if (check[1].checked) {
      oneWeekForm.style.display = "none";
      twoWeeksForm.style.display = "block";
      harfMonthForm.style.display = "none";
      oneMonthForm.style.display = "none";
    }
    else if (check[2].checked) {
      oneWeekForm.style.display = "none";
      twoWeeksForm.style.display = "none";
      harfMonthForm.style.display = "block";
      oneMonthForm.style.display = "none";
    }
    else if (check[3].checked) {
      oneWeekForm.style.display = "none";
      twoWeeksForm.style.display = "none";
      harfMonthForm.style.display = "none";
      oneMonthForm.style.display = "block";
    }
    else {
      oneWeekForm.style.display = "none";
      twoWeeksForm.style.display = "none";
      harfMonthForm.style.display = "none";
      oneMonthForm.style.display = "none";
    }
  }
</script>